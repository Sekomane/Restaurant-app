{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useCart } from \"../context/CartContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { db } from \"../firebase/firebaseConfig\";\nimport { collection, addDoc, Timestamp } from 'firebase/firestore';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var CheckoutScreen = function CheckoutScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useCart = useCart(),\n    cartItems = _useCart.cartItems,\n    getCartTotal = _useCart.getCartTotal,\n    clearCart = _useCart.clearCart;\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    address = _useState2[0],\n    setAddress = _useState2[1];\n  var handlePlaceOrder = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!user) {\n        Alert.alert('Login required');\n        return;\n      }\n      if (!address) {\n        Alert.alert('Please enter delivery address');\n        return;\n      }\n      if (cartItems.length === 0) {\n        Alert.alert('Cart is empty');\n        return;\n      }\n      try {\n        yield addDoc(collection(db, 'orders'), {\n          userId: user.uid,\n          items: cartItems.map(function (item) {\n            return {\n              menuItemId: item.menuItem.id,\n              name: item.menuItem.name,\n              price: item.menuItem.price,\n              quantity: item.quantity,\n              totalPrice: item.totalPrice\n            };\n          }),\n          total: getCartTotal(),\n          status: 'pending',\n          address: address,\n          createdAt: Timestamp.now()\n        });\n        clearCart();\n        Alert.alert('Success', 'Order placed successfully', [{\n          text: 'OK',\n          onPress: function onPress() {\n            return navigation.navigate('Orders');\n          }\n        }]);\n      } catch (error) {\n        console.error(error);\n        Alert.alert('Error', 'Failed to place order');\n      }\n    });\n    return function handlePlaceOrder() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Checkout\"\n    }), _jsxs(View, {\n      style: styles.section,\n      children: [_jsx(Text, {\n        style: styles.sectionTitle,\n        children: \"Delivery Address\"\n      }), _jsx(TextInput, {\n        style: styles.input,\n        placeholder: \"Enter delivery address\",\n        value: address,\n        onChangeText: setAddress,\n        multiline: true\n      })]\n    }), _jsxs(View, {\n      style: styles.section,\n      children: [_jsx(Text, {\n        style: styles.sectionTitle,\n        children: \"Order Summary\"\n      }), cartItems.map(function (item) {\n        return _jsxs(View, {\n          style: styles.item,\n          children: [_jsx(Text, {\n            style: styles.itemName,\n            children: item.menuItem.name\n          }), _jsxs(Text, {\n            children: [\"R\", item.menuItem.price, \" \\xD7 \", item.quantity, \" = R\", item.totalPrice]\n          })]\n        }, item.id);\n      })]\n    }), _jsxs(Text, {\n      style: styles.total,\n      children: [\"Total: R\", getCartTotal()]\n    }), _jsx(TouchableOpacity, {\n      style: styles.button,\n      onPress: handlePlaceOrder,\n      children: _jsx(Text, {\n        style: styles.buttonText,\n        children: \"Place Order\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#f5f5f5'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 20\n  },\n  section: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderRadius: 8,\n    marginBottom: 15\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 10\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ddd',\n    padding: 12,\n    borderRadius: 8\n  },\n  item: {\n    marginBottom: 8\n  },\n  itemName: {\n    fontWeight: 'bold'\n  },\n  total: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginVertical: 20\n  },\n  button: {\n    backgroundColor: '#28a745',\n    padding: 15,\n    borderRadius: 8\n  },\n  buttonText: {\n    color: '#fff',\n    textAlign: 'center',\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useState","View","Text","TouchableOpacity","StyleSheet","Alert","TextInput","ScrollView","useCart","useAuth","db","collection","addDoc","Timestamp","jsx","_jsx","jsxs","_jsxs","CheckoutScreen","_ref","navigation","_useCart","cartItems","getCartTotal","clearCart","_useAuth","user","_useState","_useState2","_slicedToArray","address","setAddress","handlePlaceOrder","_ref2","_asyncToGenerator","alert","length","userId","uid","items","map","item","menuItemId","menuItem","id","name","price","quantity","totalPrice","total","status","createdAt","now","text","onPress","navigate","error","console","apply","arguments","style","styles","container","children","title","section","sectionTitle","input","placeholder","value","onChangeText","multiline","itemName","button","buttonText","create","flex","padding","backgroundColor","fontSize","fontWeight","textAlign","marginBottom","borderRadius","borderWidth","borderColor","marginVertical","color"],"sources":["D:/Sekomane/Documents/React Native Restaurant App (7)/React Native Restaurant App/screens/CheckoutScreen.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  Alert,\n  TextInput,\n  ScrollView\n} from 'react-native';\n\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport { db } from '../firebase/firebaseConfig';\nimport { collection, addDoc, Timestamp } from 'firebase/firestore';\n\nexport const CheckoutScreen: React.FC<{ navigation: any }> = ({ navigation }) => {\n  const { cartItems, getCartTotal, clearCart } = useCart();\n  const { user } = useAuth();\n  const [address, setAddress] = useState('');\n\n  const handlePlaceOrder = async () => {\n    if (!user) {\n      Alert.alert('Login required');\n      return;\n    }\n\n    if (!address) {\n      Alert.alert('Please enter delivery address');\n      return;\n    }\n\n    if (cartItems.length === 0) {\n      Alert.alert('Cart is empty');\n      return;\n    }\n\n    try {\n      await addDoc(collection(db, 'orders'), {\n        userId: user.uid,\n        items: cartItems.map(item => ({\n          menuItemId: item.menuItem.id,\n          name: item.menuItem.name,\n          price: item.menuItem.price,\n          quantity: item.quantity,\n          totalPrice: item.totalPrice\n        })),\n        total: getCartTotal(),\n        status: 'pending',\n        address,\n        createdAt: Timestamp.now()\n      });\n\n      clearCart();\n\n      Alert.alert('Success', 'Order placed successfully', [\n        {\n          text: 'OK',\n          onPress: () => navigation.navigate('Orders')\n        }\n      ]);\n    } catch (error) {\n      console.error(error);\n      Alert.alert('Error', 'Failed to place order');\n    }\n  };\n\n  return (\n    <ScrollView style={styles.container}>\n      <Text style={styles.title}>Checkout</Text>\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Delivery Address</Text>\n        <TextInput\n          style={styles.input}\n          placeholder=\"Enter delivery address\"\n          value={address}\n          onChangeText={setAddress}\n          multiline\n        />\n      </View>\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Order Summary</Text>\n\n        {cartItems.map(item => (\n          <View key={item.id} style={styles.item}>\n            <Text style={styles.itemName}>{item.menuItem.name}</Text>\n            <Text>\n              R{item.menuItem.price} Ã— {item.quantity} = R{item.totalPrice}\n            </Text>\n          </View>\n        ))}\n      </View>\n\n      <Text style={styles.total}>Total: R{getCartTotal()}</Text>\n\n      <TouchableOpacity style={styles.button} onPress={handlePlaceOrder}>\n        <Text style={styles.buttonText}>Place Order</Text>\n      </TouchableOpacity>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },\n  title: { fontSize: 24, fontWeight: 'bold', textAlign: 'center', marginBottom: 20 },\n  section: { backgroundColor: '#fff', padding: 15, borderRadius: 8, marginBottom: 15 },\n  sectionTitle: { fontSize: 18, fontWeight: 'bold', marginBottom: 10 },\n  input: { borderWidth: 1, borderColor: '#ddd', padding: 12, borderRadius: 8 },\n  item: { marginBottom: 8 },\n  itemName: { fontWeight: 'bold' },\n  total: { fontSize: 20, fontWeight: 'bold', textAlign: 'center', marginVertical: 20 },\n  button: { backgroundColor: '#28a745', padding: 15, borderRadius: 8 },\n  buttonText: { color: '#fff', textAlign: 'center', fontWeight: 'bold' }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}