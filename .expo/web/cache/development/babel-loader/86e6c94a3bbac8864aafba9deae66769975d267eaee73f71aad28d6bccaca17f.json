{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useAuth } from \"../context/AuthContext\";\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nexport var OrderHistoryScreen = function OrderHistoryScreen() {\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    orders = _useState2[0],\n    setOrders = _useState2[1];\n  useEffect(function () {\n    loadOrders();\n  }, []);\n  var loadOrders = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (!user) return;\n      try {\n        var storedOrders = yield AsyncStorage.getItem('orders');\n        if (storedOrders) {\n          var allOrders = JSON.parse(storedOrders);\n          var userOrders = allOrders.filter(function (order) {\n            return order.userId === user.id;\n          });\n          setOrders(userOrders);\n        }\n      } catch (error) {\n        console.error('Error loading orders:', error);\n      }\n    });\n    return function loadOrders() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var renderOrder = function renderOrder(_ref2) {\n    var item = _ref2.item;\n    return _jsxs(View, {\n      style: styles.orderContainer,\n      children: [_jsxs(Text, {\n        style: styles.orderId,\n        children: [\"Order #\", item.id]\n      }), _jsx(Text, {\n        style: styles.orderDate,\n        children: new Date(item.createdAt).toLocaleDateString()\n      }), _jsxs(Text, {\n        style: styles.orderTotal,\n        children: [\"Total: R\", item.total.toFixed(2)]\n      }), _jsxs(Text, {\n        style: styles.orderStatus,\n        children: [\"Status: \", item.status]\n      }), _jsxs(Text, {\n        style: styles.orderItems,\n        children: [item.items.length, \" items\"]\n      })]\n    });\n  };\n  if (!user) {\n    return _jsx(View, {\n      style: styles.container,\n      children: _jsx(Text, {\n        style: styles.errorText,\n        children: \"Please login to view order history\"\n      })\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Order History\"\n    }), orders.length === 0 ? _jsx(Text, {\n      style: styles.emptyText,\n      children: \"No orders found\"\n    }) : _jsx(FlatList, {\n      data: orders,\n      renderItem: renderOrder,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: '#f5f5f5'\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  orderContainer: {\n    backgroundColor: 'white',\n    padding: 15,\n    marginBottom: 10,\n    borderRadius: 8,\n    elevation: 2\n  },\n  orderId: {\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  orderDate: {\n    fontSize: 14,\n    color: '#666',\n    marginTop: 5\n  },\n  orderTotal: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#007bff',\n    marginTop: 5\n  },\n  orderStatus: {\n    fontSize: 14,\n    color: '#28a745',\n    marginTop: 5\n  },\n  orderItems: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 5\n  },\n  emptyText: {\n    textAlign: 'center',\n    fontSize: 16,\n    color: '#666',\n    marginTop: 50\n  },\n  errorText: {\n    textAlign: 'center',\n    fontSize: 16,\n    color: '#dc3545',\n    marginTop: 50\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","FlatList","StyleSheet","AsyncStorage","useAuth","jsxs","_jsxs","jsx","_jsx","OrderHistoryScreen","_useAuth","user","_useState","_useState2","_slicedToArray","orders","setOrders","loadOrders","_ref","_asyncToGenerator","storedOrders","getItem","allOrders","JSON","parse","userOrders","filter","order","userId","id","error","console","apply","arguments","renderOrder","_ref2","item","style","styles","orderContainer","children","orderId","orderDate","Date","createdAt","toLocaleDateString","orderTotal","total","toFixed","orderStatus","status","orderItems","items","length","container","errorText","title","emptyText","data","renderItem","keyExtractor","create","flex","padding","backgroundColor","fontSize","fontWeight","marginBottom","textAlign","borderRadius","elevation","color","marginTop"],"sources":["C:/Users/tshia/Downloads/React Native Restaurant App/screens/OrderHistoryScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, FlatList, StyleSheet } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useAuth } from '../context/AuthContext';\nimport { Order } from '../types';\n\nexport const OrderHistoryScreen: React.FC = () => {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState<Order[]>([]);\n\n  useEffect(() => {\n    loadOrders();\n  }, []);\n\n  const loadOrders = async () => {\n    if (!user) return;\n    \n    try {\n      const storedOrders = await AsyncStorage.getItem('orders');\n      if (storedOrders) {\n        const allOrders = JSON.parse(storedOrders);\n        const userOrders = allOrders.filter((order: Order) => order.userId === user.id);\n        setOrders(userOrders);\n      }\n    } catch (error) {\n      console.error('Error loading orders:', error);\n    }\n  };\n\n  const renderOrder = ({ item }: { item: Order }) => (\n    <View style={styles.orderContainer}>\n      <Text style={styles.orderId}>Order #{item.id}</Text>\n      <Text style={styles.orderDate}>{new Date(item.createdAt).toLocaleDateString()}</Text>\n      <Text style={styles.orderTotal}>Total: R{item.total.toFixed(2)}</Text>\n      <Text style={styles.orderStatus}>Status: {item.status}</Text>\n      <Text style={styles.orderItems}>{item.items.length} items</Text>\n    </View>\n  );\n\n  if (!user) {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.errorText}>Please login to view order history</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Order History</Text>\n      {orders.length === 0 ? (\n        <Text style={styles.emptyText}>No orders found</Text>\n      ) : (\n        <FlatList\n          data={orders}\n          renderItem={renderOrder}\n          keyExtractor={item => item.id}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 20, backgroundColor: '#f5f5f5' },\n  title: { fontSize: 24, fontWeight: 'bold', marginBottom: 20, textAlign: 'center' },\n  orderContainer: { backgroundColor: 'white', padding: 15, marginBottom: 10, borderRadius: 8, elevation: 2 },\n  orderId: { fontSize: 16, fontWeight: 'bold' },\n  orderDate: { fontSize: 14, color: '#666', marginTop: 5 },\n  orderTotal: { fontSize: 16, fontWeight: 'bold', color: '#007bff', marginTop: 5 },\n  orderStatus: { fontSize: 14, color: '#28a745', marginTop: 5 },\n  orderItems: { fontSize: 12, color: '#666', marginTop: 5 },\n  emptyText: { textAlign: 'center', fontSize: 16, color: '#666', marginTop: 50 },\n  errorText: { textAlign: 'center', fontSize: 16, color: '#dc3545', marginTop: 50 }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}