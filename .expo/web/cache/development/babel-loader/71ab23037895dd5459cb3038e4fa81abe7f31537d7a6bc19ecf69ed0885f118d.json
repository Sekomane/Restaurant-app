{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { db } from \"../firebase/firebaseConfig\";\nimport { collection, query, orderBy, onSnapshot, doc, updateDoc } from 'firebase/firestore';\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nexport var AdminOrdersScreen = function AdminOrdersScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    orders = _useState2[0],\n    setOrders = _useState2[1];\n  useEffect(function () {\n    var q = query(collection(db, 'orders'), orderBy('createdAt', 'desc'));\n    var unsubscribe = onSnapshot(q, function (snapshot) {\n      var fetchedOrders = snapshot.docs.map(function (docSnap) {\n        return _objectSpread({\n          id: docSnap.id\n        }, docSnap.data());\n      });\n      setOrders(fetchedOrders);\n    });\n    return unsubscribe;\n  }, []);\n  var updateStatus = function () {\n    var _ref = _asyncToGenerator(function* (orderId, status) {\n      try {\n        yield updateDoc(doc(db, 'orders', orderId), {\n          status: status\n        });\n      } catch (_unused) {\n        Alert.alert('Error', 'Failed to update order status');\n      }\n    });\n    return function updateStatus(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var renderOrder = function renderOrder(_ref2) {\n    var item = _ref2.item;\n    return _jsxs(View, {\n      style: styles.card,\n      children: [_jsxs(Text, {\n        style: styles.orderId,\n        children: [\"Order #\", item.id]\n      }), _jsxs(Text, {\n        children: [\"Total: R\", item.total]\n      }), _jsxs(Text, {\n        children: [\"Status: \", item.status.toUpperCase()]\n      }), _jsx(View, {\n        style: styles.items,\n        children: item.items.map(function (i, index) {\n          return _jsxs(Text, {\n            style: styles.itemText,\n            children: [\"\\u2022 \", i.name, \" \\xD7 \", i.quantity, \" = R\", i.totalPrice]\n          }, index);\n        })\n      }), _jsxs(View, {\n        style: styles.actions,\n        children: [item.status !== 'preparing' && _jsx(TouchableOpacity, {\n          style: styles.actionButton,\n          onPress: function onPress() {\n            return updateStatus(item.id, 'preparing');\n          },\n          children: _jsx(Text, {\n            style: styles.actionText,\n            children: \"Preparing\"\n          })\n        }), item.status !== 'delivered' && _jsx(TouchableOpacity, {\n          style: [styles.actionButton, styles.delivered],\n          onPress: function onPress() {\n            return updateStatus(item.id, 'delivered');\n          },\n          children: _jsx(Text, {\n            style: styles.actionText,\n            children: \"Delivered\"\n          })\n        })]\n      })]\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Admin Orders\"\n    }), orders.length === 0 ? _jsx(Text, {\n      style: styles.empty,\n      children: \"No orders yet\"\n    }) : _jsx(FlatList, {\n      data: orders,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: renderOrder\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 15,\n    backgroundColor: '#f5f5f5'\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 15\n  },\n  card: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderRadius: 10,\n    marginBottom: 12\n  },\n  orderId: {\n    fontWeight: 'bold',\n    marginBottom: 5\n  },\n  items: {\n    marginVertical: 10\n  },\n  itemText: {\n    fontSize: 13,\n    color: '#555'\n  },\n  actions: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  actionButton: {\n    backgroundColor: '#007bff',\n    paddingVertical: 8,\n    paddingHorizontal: 15,\n    borderRadius: 6\n  },\n  delivered: {\n    backgroundColor: '#28a745'\n  },\n  actionText: {\n    color: '#fff',\n    fontWeight: 'bold'\n  },\n  empty: {\n    textAlign: 'center',\n    marginTop: 50,\n    color: '#666'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","FlatList","TouchableOpacity","StyleSheet","Alert","db","collection","query","orderBy","onSnapshot","doc","updateDoc","jsxs","_jsxs","jsx","_jsx","AdminOrdersScreen","_useState","_useState2","_slicedToArray","orders","setOrders","q","unsubscribe","snapshot","fetchedOrders","docs","map","docSnap","_objectSpread","id","data","updateStatus","_ref","_asyncToGenerator","orderId","status","_unused","alert","_x","_x2","apply","arguments","renderOrder","_ref2","item","style","styles","card","children","total","toUpperCase","items","i","index","itemText","name","quantity","totalPrice","actions","actionButton","onPress","actionText","delivered","container","title","length","empty","keyExtractor","renderItem","create","flex","padding","backgroundColor","fontSize","fontWeight","textAlign","marginBottom","borderRadius","marginVertical","color","flexDirection","justifyContent","paddingVertical","paddingHorizontal","marginTop"],"sources":["D:/Sekomane/Documents/React Native Restaurant App (7)/React Native Restaurant App/admin/adminOrdersScreen.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  Alert\r\n} from 'react-native';\r\n\r\nimport { db } from '../firebase/firebaseConfig';\r\nimport {\r\n  collection,\r\n  query,\r\n  orderBy,\r\n  onSnapshot,\r\n  doc,\r\n  updateDoc\r\n} from 'firebase/firestore';\r\n\r\ntype OrderItem = {\r\n  name: string;\r\n  quantity: number;\r\n  totalPrice: number;\r\n};\r\n\r\ntype Order = {\r\n  id: string;\r\n  userId: string;\r\n  total: number;\r\n  status: 'pending' | 'preparing' | 'delivered';\r\n  createdAt: any;\r\n  items: OrderItem[];\r\n};\r\n\r\nexport const AdminOrdersScreen: React.FC = () => {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n\r\n  useEffect(() => {\r\n    const q = query(\r\n      collection(db, 'orders'),\r\n      orderBy('createdAt', 'desc')\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(q, snapshot => {\r\n      const fetchedOrders: Order[] = snapshot.docs.map(docSnap => ({\r\n        id: docSnap.id,\r\n        ...(docSnap.data() as Omit<Order, 'id'>)\r\n      }));\r\n\r\n      setOrders(fetchedOrders);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  /* ================= UPDATE STATUS ================= */\r\n\r\n  const updateStatus = async (orderId: string, status: Order['status']) => {\r\n    try {\r\n      await updateDoc(doc(db, 'orders', orderId), { status });\r\n    } catch {\r\n      Alert.alert('Error', 'Failed to update order status');\r\n    }\r\n  };\r\n\r\n  /* ================= UI ================= */\r\n\r\n  const renderOrder = ({ item }: { item: Order }) => (\r\n    <View style={styles.card}>\r\n      <Text style={styles.orderId}>Order #{item.id}</Text>\r\n      <Text>Total: R{item.total}</Text>\r\n      <Text>Status: {item.status.toUpperCase()}</Text>\r\n\r\n      <View style={styles.items}>\r\n        {item.items.map((i, index) => (\r\n          <Text key={index} style={styles.itemText}>\r\n            • {i.name} × {i.quantity} = R{i.totalPrice}\r\n          </Text>\r\n        ))}\r\n      </View>\r\n\r\n      <View style={styles.actions}>\r\n        {item.status !== 'preparing' && (\r\n          <TouchableOpacity\r\n            style={styles.actionButton}\r\n            onPress={() => updateStatus(item.id, 'preparing')}\r\n          >\r\n            <Text style={styles.actionText}>Preparing</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n\r\n        {item.status !== 'delivered' && (\r\n          <TouchableOpacity\r\n            style={[styles.actionButton, styles.delivered]}\r\n            onPress={() => updateStatus(item.id, 'delivered')}\r\n          >\r\n            <Text style={styles.actionText}>Delivered</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n      </View>\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Admin Orders</Text>\r\n\r\n      {orders.length === 0 ? (\r\n        <Text style={styles.empty}>No orders yet</Text>\r\n      ) : (\r\n        <FlatList\r\n          data={orders}\r\n          keyExtractor={item => item.id}\r\n          renderItem={renderOrder}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\n/* ================= STYLES ================= */\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, padding: 15, backgroundColor: '#f5f5f5' },\r\n  title: { fontSize: 22, fontWeight: 'bold', textAlign: 'center', marginBottom: 15 },\r\n\r\n  card: {\r\n    backgroundColor: '#fff',\r\n    padding: 15,\r\n    borderRadius: 10,\r\n    marginBottom: 12\r\n  },\r\n\r\n  orderId: { fontWeight: 'bold', marginBottom: 5 },\r\n\r\n  items: { marginVertical: 10 },\r\n  itemText: { fontSize: 13, color: '#555' },\r\n\r\n  actions: { flexDirection: 'row', justifyContent: 'space-between' },\r\n\r\n  actionButton: {\r\n    backgroundColor: '#007bff',\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 15,\r\n    borderRadius: 6\r\n  },\r\n\r\n  delivered: {\r\n    backgroundColor: '#28a745'\r\n  },\r\n\r\n  actionText: {\r\n    color: '#fff',\r\n    fontWeight: 'bold'\r\n  },\r\n\r\n  empty: {\r\n    textAlign: 'center',\r\n    marginTop: 50,\r\n    color: '#666'\r\n  }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}