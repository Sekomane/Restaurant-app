{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext(undefined);\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  useEffect(function () {\n    loadUser();\n  }, []);\n  var loadUser = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var userData = yield AsyncStorage.getItem('user');\n        if (userData) {\n          setUser(JSON.parse(userData));\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n      }\n    });\n    return function loadUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var login = function () {\n    var _ref3 = _asyncToGenerator(function* (email, password) {\n      if (email && password) {\n        var userData = {\n          id: '1',\n          email: email,\n          name: email.split('@')[0]\n        };\n        setUser(userData);\n        yield AsyncStorage.setItem('user', JSON.stringify(userData));\n        return true;\n      }\n      return false;\n    });\n    return function login(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var register = function () {\n    var _ref4 = _asyncToGenerator(function* (email, password, name) {\n      if (email && password && name) {\n        var userData = {\n          id: Date.now().toString(),\n          email: email,\n          name: name\n        };\n        setUser(userData);\n        yield AsyncStorage.setItem('user', JSON.stringify(userData));\n        return true;\n      }\n      return false;\n    });\n    return function register(_x3, _x4, _x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      setUser(null);\n      yield AsyncStorage.removeItem('user');\n    });\n    return function logout() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var updateProfile = function () {\n    var _ref6 = _asyncToGenerator(function* (userData) {\n      if (user) {\n        var updatedUser = _objectSpread(_objectSpread({}, user), userData);\n        setUser(updatedUser);\n        yield AsyncStorage.setItem('user', JSON.stringify(updatedUser));\n      }\n    });\n    return function updateProfile(_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      login: login,\n      register: register,\n      logout: logout,\n      updateProfile: updateProfile\n    },\n    children: children\n  });\n};\nexport var useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AsyncStorage","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","loadUser","_ref2","_asyncToGenerator","userData","getItem","JSON","parse","error","console","apply","arguments","login","_ref3","email","password","id","name","split","setItem","stringify","_x","_x2","register","_ref4","Date","now","toString","_x3","_x4","_x5","logout","_ref5","removeItem","updateProfile","_ref6","updatedUser","_objectSpread","_x6","Provider","value","useAuth","context","Error"],"sources":["C:/Users/tshia/Downloads/React Native Restaurant App/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { User } from '../types';\n\ninterface AuthContextType {\n  user: User | null;\n  login: (email: string, password: string) => Promise<boolean>;\n  register: (email: string, password: string, name: string) => Promise<boolean>;\n  logout: () => void;\n  updateProfile: (userData: Partial<User>) => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    loadUser();\n  }, []);\n\n  const loadUser = async () => {\n    try {\n      const userData = await AsyncStorage.getItem('user');\n      if (userData) {\n        setUser(JSON.parse(userData));\n      }\n    } catch (error) {\n      console.error('Error loading user:', error);\n    }\n  };\n\n  const login = async (email: string, password: string): Promise<boolean> => {\n    if (email && password) {\n      const userData: User = {\n        id: '1',\n        email,\n        name: email.split('@')[0],\n      };\n      setUser(userData);\n      await AsyncStorage.setItem('user', JSON.stringify(userData));\n      return true;\n    }\n    return false;\n  };\n\n  const register = async (email: string, password: string, name: string): Promise<boolean> => {\n    if (email && password && name) {\n      const userData: User = {\n        id: Date.now().toString(),\n        email,\n        name,\n      };\n      setUser(userData);\n      await AsyncStorage.setItem('user', JSON.stringify(userData));\n      return true;\n    }\n    return false;\n  };\n\n  const logout = async () => {\n    setUser(null);\n    await AsyncStorage.removeItem('user');\n  };\n\n  const updateProfile = async (userData: Partial<User>) => {\n    if (user) {\n      const updatedUser = { ...user, ...userData };\n      setUser(updatedUser);\n      await AsyncStorage.setItem('user', JSON.stringify(updatedUser));\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, register, logout, updateProfile }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}