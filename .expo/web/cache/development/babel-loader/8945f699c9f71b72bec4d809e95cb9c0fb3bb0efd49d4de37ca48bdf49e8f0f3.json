{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var PaymentService = function () {\n  function PaymentService() {\n    _classCallCheck(this, PaymentService);\n  }\n  return _createClass(PaymentService, null, [{\n    key: \"processStripePayment\",\n    value: function () {\n      var _processStripePayment = _asyncToGenerator(function* (paymentData) {\n        try {\n          var response = yield fetch('https://api.stripe.com/v1/payment_intents', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${this.STRIPE_API_KEY}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n              amount: (paymentData.amount * 100).toString(),\n              currency: 'zar',\n              confirm: 'true'\n            }).toString()\n          });\n          var result = yield response.json();\n          return {\n            success: result.status === 'succeeded',\n            transactionId: result.id,\n            provider: 'stripe'\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: 'Payment failed'\n          };\n        }\n      });\n      function processStripePayment(_x) {\n        return _processStripePayment.apply(this, arguments);\n      }\n      return processStripePayment;\n    }()\n  }, {\n    key: \"processPayPalPayment\",\n    value: function () {\n      var _processPayPalPayment = _asyncToGenerator(function* (amount) {\n        try {\n          var response = yield fetch('https://api.paypal.com/v2/checkout/orders', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${yield this.getPayPalToken()}`\n            },\n            body: JSON.stringify({\n              intent: 'CAPTURE',\n              purchase_units: [{\n                amount: {\n                  currency_code: 'ZAR',\n                  value: amount.toFixed(2)\n                }\n              }]\n            })\n          });\n          var order = yield response.json();\n          return {\n            success: !!order.id,\n            transactionId: order.id,\n            provider: 'paypal'\n          };\n        } catch (error) {\n          return {\n            success: false,\n            error: 'PayPal payment failed'\n          };\n        }\n      });\n      function processPayPalPayment(_x2) {\n        return _processPayPalPayment.apply(this, arguments);\n      }\n      return processPayPalPayment;\n    }()\n  }, {\n    key: \"getPayPalToken\",\n    value: function () {\n      var _getPayPalToken = _asyncToGenerator(function* () {\n        var response = yield fetch('https://api.paypal.com/v1/oauth2/token', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Basic ${btoa(`${this.PAYPAL_CLIENT_ID}:test_secret`)}`,\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: 'grant_type=client_credentials'\n        });\n        var data = yield response.json();\n        return data.access_token;\n      });\n      function getPayPalToken() {\n        return _getPayPalToken.apply(this, arguments);\n      }\n      return getPayPalToken;\n    }()\n  }, {\n    key: \"validateVCCCard\",\n    value: function validateVCCCard(cardNumber) {\n      var vccPrefixes = ['4111', '4000', '5555', '3782'];\n      return vccPrefixes.some(function (prefix) {\n        return cardNumber.startsWith(prefix);\n      });\n    }\n  }, {\n    key: \"processPayment\",\n    value: function () {\n      var _processPayment = _asyncToGenerator(function* (paymentData) {\n        if (this.validateVCCCard(paymentData.cardNumber)) {\n          return new Promise(function (resolve) {\n            setTimeout(function () {\n              resolve({\n                success: true,\n                transactionId: `vcc_${Date.now()}`,\n                provider: 'vcc'\n              });\n            }, 2000);\n          });\n        }\n        switch (paymentData.provider) {\n          case 'stripe':\n            return this.processStripePayment(paymentData);\n          case 'paypal':\n            return this.processPayPalPayment(paymentData.amount);\n          default:\n            return new Promise(function (resolve) {\n              setTimeout(function () {\n                resolve({\n                  success: true,\n                  transactionId: `mock_${Date.now()}`,\n                  provider: 'mock'\n                });\n              }, 2000);\n            });\n        }\n      });\n      function processPayment(_x3) {\n        return _processPayment.apply(this, arguments);\n      }\n      return processPayment;\n    }()\n  }]);\n}();\nPaymentService.STRIPE_API_KEY = 'pk_test_51234567890abcdef';\nPaymentService.PAYPAL_CLIENT_ID = 'test_paypal_client_id';","map":{"version":3,"names":["PaymentService","_classCallCheck","_createClass","key","value","_processStripePayment","_asyncToGenerator","paymentData","response","fetch","method","headers","STRIPE_API_KEY","body","URLSearchParams","amount","toString","currency","confirm","result","json","success","status","transactionId","id","provider","error","processStripePayment","_x","apply","arguments","_processPayPalPayment","getPayPalToken","JSON","stringify","intent","purchase_units","currency_code","toFixed","order","processPayPalPayment","_x2","_getPayPalToken","btoa","PAYPAL_CLIENT_ID","data","access_token","validateVCCCard","cardNumber","vccPrefixes","some","prefix","startsWith","_processPayment","Promise","resolve","setTimeout","Date","now","processPayment","_x3"],"sources":["C:/Users/tshia/Downloads/React Native Restaurant App/services/PaymentService.ts"],"sourcesContent":["export class PaymentService {\n  private static STRIPE_API_KEY = 'pk_test_51234567890abcdef';\n  private static PAYPAL_CLIENT_ID = 'test_paypal_client_id';\n\n  static async processStripePayment(paymentData: {\n    amount: number;\n    cardNumber: string;\n    cardExpiry: string;\n    cardCVV: string;\n  }) {\n    try {\n      const response = await fetch('https://api.stripe.com/v1/payment_intents', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.STRIPE_API_KEY}`,\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: new URLSearchParams({\n          amount: (paymentData.amount * 100).toString(),\n          currency: 'zar',\n          confirm: 'true'\n        }).toString()\n      });\n\n      const result = await response.json();\n      return {\n        success: result.status === 'succeeded',\n        transactionId: result.id,\n        provider: 'stripe'\n      };\n    } catch (error) {\n      return { success: false, error: 'Payment failed' };\n    }\n  }\n\n  static async processPayPalPayment(amount: number) {\n    try {\n      const response = await fetch('https://api.paypal.com/v2/checkout/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${await this.getPayPalToken()}`,\n        },\n        body: JSON.stringify({\n          intent: 'CAPTURE',\n          purchase_units: [{\n            amount: {\n              currency_code: 'ZAR',\n              value: amount.toFixed(2)\n            }\n          }]\n        })\n      });\n\n      const order = await response.json();\n      return {\n        success: !!order.id,\n        transactionId: order.id,\n        provider: 'paypal'\n      };\n    } catch (error) {\n      return { success: false, error: 'PayPal payment failed' };\n    }\n  }\n\n  private static async getPayPalToken(): Promise<string> {\n    const response = await fetch('https://api.paypal.com/v1/oauth2/token', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Basic ${btoa(`${this.PAYPAL_CLIENT_ID}:test_secret`)}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: 'grant_type=client_credentials'\n    });\n    const data = await response.json();\n    return data.access_token;\n  }\n\n  static validateVCCCard(cardNumber: string): boolean {\n    const vccPrefixes = ['4111', '4000', '5555', '3782'];\n    return vccPrefixes.some(prefix => cardNumber.startsWith(prefix));\n  }\n\n  static async processPayment(paymentData: {\n    amount: number;\n    cardNumber: string;\n    cardExpiry: string;\n    cardCVV: string;\n    provider: 'stripe' | 'paypal' | 'mock';\n  }) {\n    if (this.validateVCCCard(paymentData.cardNumber)) {\n      return new Promise<any>((resolve) => {\n        setTimeout(() => {\n          resolve({\n            success: true,\n            transactionId: `vcc_${Date.now()}`,\n            provider: 'vcc'\n          });\n        }, 2000);\n      });\n    }\n\n    switch (paymentData.provider) {\n      case 'stripe':\n        return this.processStripePayment(paymentData);\n      case 'paypal':\n        return this.processPayPalPayment(paymentData.amount);\n      default:\n        return new Promise<any>((resolve) => {\n          setTimeout(() => {\n            resolve({\n              success: true,\n              transactionId: `mock_${Date.now()}`,\n              provider: 'mock'\n            });\n          }, 2000);\n        });\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}